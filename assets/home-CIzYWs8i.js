import{j as e,c as v,r as c,B as W,g as V,e as G,a as Z,f as Y}from"./index-DsutIs27.js";import{M as b,b as L,P as X,C as ee}from"./customer-service-DuEwfq-C.js";import{S as D}from"./skeleton-CVtKrjUz.js";import{d as B,e as se}from"./tabbar-service-Cba5iaUz.js";import{b as A,c as te,d as re}from"./order-COKHhIvr.js";import{s as ne,P as _}from"./sleep-AcpSZMhY.js";import{b as ie,a as ae}from"./wifi-Dd-PmMqo.js";import{b as oe,a as ce}from"./service-COSR2zsV.js";const le=s=>e.jsx("svg",{fill:"currentColor",width:"1em",height:"1em",viewBox:"0 0 52 46",...s,children:e.jsx("g",{id:"\\u8FD0\\u8425\\u5546\\u67E5\\u8BE2",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd",children:e.jsx("g",{id:"\\u652F\\u4ED8",transform:"translate(-507.000000, -957.000000)",children:e.jsxs("g",{id:"\\u7F16\\u7EC4-2",transform:"translate(505.000000, 952.000000)",children:[e.jsx("rect",{id:"\\u77E9\\u5F62",x:0,y:0,width:56,height:56}),e.jsx("path",{d:"M20.6786098,33.9261377 C20.4469424,34.0443402 20.1855394,34.1125865 19.9078904,34.1125865 C19.2661424,34.1125865 18.7080292,33.7557294 18.4151312,33.2288192 L18.3028166,32.98028 L13.6279443,22.6281109 C13.5775053,22.5150578 13.5459516,22.3882135 13.5459516,22.2645654 C13.5459516,21.7872565 13.9291706,21.4001533 14.402124,21.4001533 C14.5942027,21.4001533 14.7713256,21.4642562 14.9146075,21.5717454 L20.4306964,25.5351729 C20.8340323,25.8018243 21.3152553,25.957731 21.8328413,25.957731 C22.1423959,25.957731 22.4365842,25.8997247 22.7113594,25.7985689 L48.6543552,14.1457567 C44.0046437,8.61497555 36.3457193,5 27.6787777,5 C13.496451,5 2,14.6687604 2,26.5959777 C2,33.1038689 5.45911693,38.9612018 10.8727444,42.919835 C11.3073407,43.2324771 11.5913239,43.746543 11.5913239,44.3268427 C11.5913239,44.518441 11.5505035,44.6946499 11.5013548,44.8772513 C11.0689285,46.5055115 10.3765069,49.1114144 10.3442494,49.2335827 C10.2903501,49.4377293 10.2057768,49.651228 10.2057768,49.8650818 C10.2057768,50.3420355 10.5893477,50.7288428 11.0623011,50.7288428 C11.2486321,50.7288428 11.3998903,50.6592944 11.5568963,50.5680825 L17.1786139,47.2929764 C17.6014215,47.0462129 18.0491555,46.8939168 18.5421672,46.8939168 C18.8045085,46.8939168 19.0581697,46.9345804 19.297227,47.0083313 C21.9196434,47.7695158 24.7491528,48.192725 27.6788364,48.192725 C41.8605767,48.192725 53.3580247,38.5237279 53.3580247,26.5960962 C53.3580247,22.9837842 52.2975745,19.5813011 50.4330918,16.5888869 L20.8658791,33.8169319 L20.6786098,33.9261377 Z",id:"\\u8DEF\\u5F84",fill:"#00C800",fillRule:"nonzero"})]})})})}),xe=s=>e.jsx("svg",{viewBox:"0 0 256 256",width:"1.2em",height:"1.2em",...s,children:e.jsx("path",{fill:"currentColor",d:"M220.07 176.94C214.41 167.2 206 139.73 206 104a78 78 0 1 0-156 0c0 35.74-8.42 63.2-14.08 72.94A14 14 0 0 0 48 198h42.48a38 38 0 0 0 75 0H208a14 14 0 0 0 12.06-21.06ZM128 218a26 26 0 0 1-25.29-20h50.58A26 26 0 0 1 128 218m81.71-33a1.9 1.9 0 0 1-1.7 1H48a1.9 1.9 0 0 1-1.7-1a2 2 0 0 1 0-2c7.57-13 15.7-43.31 15.7-79a66 66 0 1 1 132 0c0 35.68 8.14 65.95 15.71 79a2 2 0 0 1 0 2"})});function de(){return e.jsxs("div",{className:"rounded-full h-[64px] mx-xs text-white bg-[#0cd1c7] flex items-center px-[34px]",children:[e.jsx(xe,{className:"text-sm"}),e.jsx("span",{className:"ml-[12px] text-sm",children:"通知消息"})]})}function S({children:s,className:r,color:t="info",onClick:i}){return e.jsxs("div",{onClick:()=>i==null?void 0:i(),className:v("h-[44px] px-[13px] flex justify-between items-center  rounded-[6px]",{"bg-info text-[#666666]":t==="info","bg-[#EEF9FF] text-primary":t==="primary"},r),children:[e.jsx("span",{className:"text-[26px]",children:s}),e.jsx(B,{className:v(" ml-[7px]  text-[#A4A4A4] text-[23px]",t==="primary"?"text-primary":"text-[#A4A4A4]")})]})}async function q(s){return await fetch(s).then(r=>r.json())}function ue(){return A({queryKey:["countries"],queryFn:async()=>await q("/project-preview/data/data.json"),staleTime:1/0,placeholderData:[]})}function pe(s){return A({queryKey:["operators",s],queryFn:async()=>await q("/project-preview/data/data.json"),select:t=>{var i;return((i=t.find(u=>u.id===s))==null?void 0:i.operators)||[]},enabled:!!s})}function me(s){return A({queryKey:["OperatorQuery",s],queryFn:async()=>(await ne(1e3),!0),enabled:!!s})}function fe(){return e.jsxs("div",{className:"px-sm flex flex-col justify-center items-center ",children:[e.jsx(D,{containerClassName:"w-[50%]  overflow-hidden",inline:!0,height:`${50/75}rem`,style:{display:"flex"}}),e.jsx(D,{containerClassName:"w-[80%]  overflow-hidden mt-1",inline:!0,height:`${50/75}rem`,style:{display:"flex"}})]})}function he(){const[s,r]=c.useState(!1),[t,i]=c.useState(0),{isLoading:u}=me(t);function o(){r(!0),i(Date.now())}return e.jsxs(e.Fragment,{children:[e.jsx(S,{onClick:()=>o(),color:"primary",children:"运营商查询"}),e.jsx(b,{isOpen:s,setIsOpen:()=>r(!1),type:"center",children:e.jsxs("div",{className:" h-[544px] w-[544px] flex flex-col",children:[e.jsx("div",{className:"title bg-primary text-white text-[36px] h-[120px] flex items-center justify-center",children:"运营商查询"}),e.jsx("div",{className:"flex-1 flex pt-[70px] flex-col",children:u?e.jsx(fe,{}):e.jsxs("p",{className:"text-center text-[40px]  font-bold",children:["缅甸MPT",e.jsx("br",{}),"ATOMyanmar"]})}),e.jsx("div",{className:" px-[54px] pb-[45px]",children:e.jsx(W,{block:!0,className:"w-full",onClick:()=>r(!1),children:"确定"})})]})})]})}function je({name:s,money:r,hot:t=!1,active:i,id:u,onClick:o}){return e.jsxs("div",{onClick:()=>o==null?void 0:o(u),className:v("flex items-center flex-col rounded-[12px] py-[30px] h-[132px] justify-between relative",i?"bg-primary text-white":"bg-info"),children:[e.jsx("div",{className:"text-[40px] leading-none font-bold",children:s}),e.jsxs("div",{className:"text-sm leading-none",children:["售价",r,"元"]}),t&&e.jsx("img",{src:"/project-preview/th.png",className:"w-[66px] h-[33px] block absolute -top-[23px] right-0",alt:""})]})}const ge=[{title:"订单详情",content:"泰国运营商5000话费充值"},{title:"手机号码",content:"+95 4627484848499"},{title:"支付金额",content:"15.00元"},{title:"支付方式",content:e.jsxs("div",{className:"flex items-center h-full ",children:[e.jsx(le,{className:"text-[46px]"}),e.jsx("span",{className:"text-[#000] text-[30px] ml-[8px]",children:"微信支付"}),e.jsx(B,{className:"ml-[11px] text-[#A4A4A4] text-[23px]"})]})}];function ve({isOpen:s,setIsOpen:r,countryId:t,operatorId:i}){const{data:u}=te(t,i),{mutate:o,isPending:d}=re();async function p(){o(u)}return e.jsx(b,{isOpen:s,setIsOpen:l=>r(l),contentWidth:"100%",shouldCloseOnOverlayClick:!d,children:e.jsxs("div",{className:"relative pt-[75px]",children:[e.jsx(L,{onClick:d?void 0:()=>r(!1),color:"#666666",className:"absolute  text-sm top-[33px] right-[26px]"}),e.jsx("h1",{className:"text-center leading-[118px] text-[84px] font-500",children:"￥15.00"}),e.jsx("div",{className:"px-sm",children:ge.map(l=>e.jsxs("div",{className:"border-b h-[100px] flex justify-between items-center ",children:[e.jsx("span",{className:"text-[#666666] text-sm",children:l.title}),typeof l.content=="string"?e.jsx("span",{className:"text-[#000] text-[30px]",children:l.content}):l.content]},l.title))}),e.jsx("div",{className:"px-[28px]",children:e.jsx(W,{onClick:p,loading:d,className:"block box-border w-full mt-[127px] mb-[71px]",children:"立即支付"})})]})})}var I={exports:{}};/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */(function(s,r){(function(t){var i;if(s.exports=t(),i=!0,!i){var u=window.Cookies,o=window.Cookies=t();o.noConflict=function(){return window.Cookies=u,o}}})(function(){function t(){for(var o=0,d={};o<arguments.length;o++){var p=arguments[o];for(var l in p)d[l]=p[l]}return d}function i(o){return o.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function u(o){function d(){}function p(m,x,n){if(!(typeof document>"u")){n=t({path:"/"},d.defaults,n),typeof n.expires=="number"&&(n.expires=new Date(new Date*1+n.expires*864e5)),n.expires=n.expires?n.expires.toUTCString():"";try{var a=JSON.stringify(x);/^[\{\[]/.test(a)&&(x=a)}catch{}x=o.write?o.write(x,m):encodeURIComponent(String(x)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),m=encodeURIComponent(String(m)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var j="";for(var h in n)n[h]&&(j+="; "+h,n[h]!==!0&&(j+="="+n[h].split(";")[0]));return document.cookie=m+"="+x+j}}function l(m,x){if(!(typeof document>"u")){for(var n={},a=document.cookie?document.cookie.split("; "):[],j=0;j<a.length;j++){var h=a[j].split("="),g=h.slice(1).join("=");!x&&g.charAt(0)==='"'&&(g=g.slice(1,-1));try{var N=i(h[0]);if(g=(o.read||o)(g,N)||i(g),x)try{g=JSON.parse(g)}catch{}if(n[N]=g,m===N)break}catch{}}return m?n[m]:n}}return d.set=p,d.get=function(m){return l(m,!1)},d.getJSON=function(m){return l(m,!0)},d.remove=function(m,x){p(m,"",t(x,{expires:-1}))},d.defaults={},d.withConverter=u,d}return u(function(){})})})(I);var Ne=I.exports;const F=V(Ne);var ye=function(s){var r=c.useState(function(){return F.get(s)||null}),t=r[0],i=r[1],u=c.useCallback(function(d,p){F.set(s,d,p),i(d)},[s]),o=c.useCallback(function(){F.remove(s),i(null)},[s]);return[t,u,o]};const M="home-tour-cache-key";function Ce(){const[s,r]=ye(M),t=c.useMemo(()=>!s,[s]),{setIsOpen:i,setCurrentStep:u,isOpen:o}=G(),d=c.useCallback(()=>{if(!t)return;u(0),i(!0);const p=10*1e3;r(M,{expires:new Date(new Date().getTime()+p)})},[u,i,r,t]);return c.useEffect(()=>{o?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden")},[o]),{isOpen:o,shouldShowTour:t,showTour:d}}function K(){return e.jsx("div",{className:"size-full flex justify-center items-center text-md",children:"暂无数据"})}function $({className:s="",placeholder:r="",value:t,onChange:i}){return e.jsxs("div",{className:v("bg-[#F2F2F7] search-box h-[76px] rounded-full flex items-center px-lg",s),children:[e.jsx(oe,{color:"#999999",className:"text-md"}),e.jsx("input",{type:"text",className:"text-md ml-[13px] flex-1 h-full bg-transparent outline-none",placeholder:r,value:t,onChange:u=>i(u.target.value)}),t&&e.jsx("div",{className:"flex items-center justify-center  p-1",onClick:()=>i(""),children:e.jsx(L,{className:"text-sm text-[#999999]"})})]})}function k({words:s,activeWords:r}){return s.split("").map((t,i)=>e.jsx("span",{className:v({"text-primary font-bold":r==null?void 0:r.map(u=>u.toLowerCase()).includes(t.toLowerCase())}),children:t},i))}function U(){const[s,r]=c.useState(""),t=c.useMemo(()=>Array.from(new Set(s.split(""))).filter(Boolean),[s]);return{keyword:s,keywords:t,setKeyword:r}}const we=c.forwardRef(({data:s,pickerClassName:r,selectId:t,onSelectId:i,refetch:u},o)=>{const[d,p]=c.useState(!1),l=c.useMemo(()=>s==null?void 0:s.find(x=>x.id===t),[s,t]);function m(x){i==null||i(x),p(!1)}return c.useImperativeHandle(o,()=>({open:()=>{p(!0)}})),e.jsxs(e.Fragment,{children:[e.jsx(S,{className:v(r,"picker-country"),onClick:()=>p(!0),color:l?"primary":"info",children:(l==null?void 0:l.cn)??"选择国家"}),e.jsx(b,{isOpen:d,setIsOpen:()=>p(!1),contentWidth:"100%",title:"请选择要充值的国家和地区",children:e.jsx(be,{refetch:u,onSelectId:m,data:s,selectId:t})})]})});function be({selectId:s,data:r,onSelectId:t,refetch:i}){const{keyword:u,keywords:o,setKeyword:d}=U(),p=c.useRef({}),l=c.useMemo(()=>{const n=(r??[]).map(a=>({...a,searchWord:[]}));return o.length?n.filter(a=>(a.searchWord=o.filter(j=>a.code.includes(j)||a.cn.includes(j)),a.searchWord.length>0)):n},[r,o]),m=c.useMemo(()=>{var a;if(!(l!=null&&l.length))return[];const n=[];for(let j=0;j<l.length;j++){const h=l[j],g=h.en[0].toUpperCase();n.find(N=>N.groupName===g)?(a=n.find(N=>N.groupName===g))==null||a.children.push(h):n.push({groupName:g,children:[h]})}return n.sort((j,h)=>j.groupName.localeCompare(h.groupName))},[l]);function x(n){var a;(a=p.current[n])==null||a.scrollIntoView({behavior:"smooth"})}return c.useEffect(()=>{s&&x(s)},[s]),c.useEffect(()=>{p.current={}},[l]),e.jsx("div",{className:"h-[750px]  box-border relative",children:e.jsx(_,{onRefresh:i,children:e.jsxs("div",{className:"",children:[e.jsx("div",{className:"pt-lg px-sm   left-sm right-sm top-0",children:e.jsx($,{className:"top-0 ",value:u,onChange:n=>d(n),placeholder:"请输入国家"})}),e.jsxs("div",{className:"overflow-y-auto h-[642px] ",children:[m.map(n=>e.jsxs("div",{className:"",children:[e.jsx("div",{className:"text-primary text-md px-sm h-[83px] flex items-center",children:n.groupName}),n.children.map((a,j)=>e.jsxs("div",{onClick:()=>t==null?void 0:t(a.id),className:v("text-sm flex items-center h-[104px] border-b   px-sm ",{"bg-[#EEF9FF]":s===a.id}),ref:h=>{p.current[a.id]=h},children:[e.jsx("div",{className:"rounded-full size-[60px] bg-primary text-sm flex items-center justify-center text-white",children:a.cn[0]}),e.jsx("div",{className:"ml-[46px] text-md",children:e.jsx(k,{words:a.code,activeWords:a.searchWord??[]})}),e.jsx("div",{className:"ml-[46px] text-md",children:e.jsx(k,{words:a.cn,activeWords:a.searchWord??[]})})]},`${a.code}_${j}`))]},n.groupName)),!m.length&&e.jsx(K,{})]})]})})})}function Ee({data:s,pickerClassName:r,selectId:t,onSelectId:i,refetch:u}){const[o,d]=c.useState(!1),p=c.useMemo(()=>s==null?void 0:s.find(m=>m.id===t),[s,t]);function l(m){i==null||i(m),d(!1)}return e.jsxs(e.Fragment,{children:[e.jsx(S,{className:v(r,"picker-operator ml-1"),onClick:()=>d(!0),color:p?"primary":"info",children:(p==null?void 0:p.name)??"选择运营商"}),e.jsx(b,{isOpen:o,setIsOpen:()=>d(!1),contentWidth:"100%",title:"请选择运营商",children:e.jsx(Oe,{refetch:u,onSelectId:l,data:s,selectId:t})})]})}function Oe({onSelectId:s,selectId:r,data:t,refetch:i}){const{keyword:u,keywords:o,setKeyword:d}=U(),p=c.useRef({}),l=c.useMemo(()=>{const x=(t??[]).map(n=>({...n,searchWord:[]}));return o.length?x.filter(n=>(n.searchWord=o.filter(a=>n.name.includes(a)),n.searchWord.length>0)):x},[t,o]);function m(x){var n;(n=p.current[x])==null||n.scrollIntoView({behavior:"smooth"})}return c.useEffect(()=>{r&&m(r)},[r]),c.useEffect(()=>{p.current={}},[l]),e.jsx("div",{className:"h-[750px]  box-border relative",children:e.jsx(_,{onRefresh:i,children:e.jsxs("div",{className:"",children:[e.jsx("div",{className:"pt-lg px-sm   left-sm right-sm top-0",children:e.jsx($,{className:"top-0 ",value:u,onChange:x=>d(x),placeholder:"请输入运营商"})}),e.jsxs("div",{className:"overflow-y-auto h-[642px]   ",children:[l.map(x=>e.jsx("div",{className:"",children:e.jsxs("div",{onClick:()=>s==null?void 0:s(x.id),className:v("text-sm flex items-center h-[104px] border-b  px-sm ",{"bg-[#EEF9FF]":r===x.id}),children:[e.jsx("div",{className:"rounded-full size-[60px] bg-primary text-sm flex items-center justify-center text-white",children:x.name[0]}),e.jsx("div",{className:"ml-[46px] text-md",children:e.jsx(k,{words:x.name,activeWords:x.searchWord??[]})})]})},x.name)),!l.length&&e.jsx(K,{})]})]})})})}const T=[{name:"充话费",icon:e.jsx(ie,{className:"text-[88px]"})},{name:"充流量",icon:e.jsx(ae,{className:"text-[88px]"})},{name:"服务大厅",icon:e.jsx(ce,{className:"text-[88px]"})}],Fe=Array.from({length:8},(s,r)=>{const t=r+1;return{name:`${t*1e3}KS`,money:t*5.5,id:r}});function We(){var P;const s=Z(),[r,t]=c.useState(0),[i,u]=c.useState(0),[o,d]=c.useState(!1),{shouldShowTour:p,isOpen:l,showTour:m}=Ce(),[x]=Y(),n=c.useRef(null),{data:a,refetch:j}=ue(),[h,g]=c.useState(0),{data:N,refetch:E}=pe(h),[w,R]=c.useState(0),H=(P=T[r])==null?void 0:P.name;function z(f){u(f),d(!0)}function J(f){f===2&&s("/service"),t(f)}function Q(){var f;(f=n.current)==null||f.open()}return c.useEffect(()=>{a!=null&&a.length&&g(a[0].id)},[a]),c.useEffect(()=>{var f,y;if(h){const C=(y=(f=a==null?void 0:a.find(O=>O.id===h))==null?void 0:f.operators)==null?void 0:y.map(O=>O.id);C!=null&&C.length&&!(C!=null&&C.includes(w))&&R(C[0])}},[a,h,w]),c.useEffect(()=>{const f=x.get("type");f&&t(Number(f))},[x]),c.useEffect(()=>{if(!a||!p)return;const f=setTimeout(()=>{m()},100);return()=>{clearTimeout(f)}},[a,p,m]),e.jsxs(X,{className:v(" pt-[80px]",{"pointer-events-none":l}),children:[e.jsx(de,{}),e.jsx("div",{className:"flex justify-between bg-white mt-xs  mx-xs rounded-sm  px-[84px] pt-[32px] pb-[23px]",children:T.map((f,y)=>e.jsxs("div",{className:"item flex flex-col items-center ",onClick:()=>J(y),children:[f.icon,e.jsx("span",{className:v("mt-[12px] text-lg",{"text-primary font-bold":r===y}),children:f.name})]},f.name))}),e.jsxs("div",{className:"mx-xs bg-white rounded-sm mt-xs pt-[44px] px-xs pb-sm",children:[e.jsxs("div",{className:"flex items-center border-b pb-[23px] w-full box-border",children:[e.jsx("img",{onClick:Q,src:"/project-preview/flag-demo.png",className:"flag bg-red-300 rounded-full size-[78px]"}),e.jsx("div",{className:"flex-1 pl-[33px] pr-[40px]",children:e.jsx("input",{className:"text-[64px] w-full font-bold outline-none phonenumber-input",placeholder:"请输入号码"})}),e.jsx("a",{href:"content://contacts/people",children:e.jsx(se,{className:"text-primary text-[44px]"})})]}),e.jsxs("div",{className:"flex mt-[20px] ",children:[e.jsx(we,{refetch:()=>j(),data:a??[],selectId:h,onSelectId:g,ref:n}),e.jsx(Ee,{refetch:()=>E(),data:N??[],selectId:w,onSelectId:R}),e.jsx("div",{className:"flex-1"}),e.jsx(he,{})]}),e.jsx("h1",{className:"font-bold mt-[47px] text-lg",children:H}),e.jsx("div",{className:"goods-container grid grid-cols-3 gap-[17px] mt-xs",children:Fe.map((f,y)=>c.createElement(je,{...f,key:f.id,hot:y===0,active:i===f.id,onClick:z}))})]}),e.jsxs("div",{className:"mx-xs bg-white rounded-sm mt-xs pt-[39px] px-xs pb-sm",children:[e.jsx("h1",{className:"leading-[45px] text-lg font-bold text-center",children:"温馨提示"}),e.jsxs("div",{className:"bg-[#EEF9FF] rounded-sm py-[26px] mt-[26px] pb-[30px] px-lg box-border min-h-[220px]",children:[e.jsx("h2",{className:"text-lg",children:"一、内容提示"}),e.jsx("p",{className:"text-[28px] text-[#666666] leading-[40px]",children:"该产品仅适用于缅甸电话卡；"}),e.jsx("p",{className:"text-[28px] text-[#666666] leading-[40px]",children:"该产品仅适用于缅甸电话卡；"})]})]}),e.jsx(ee,{}),e.jsx(ve,{isOpen:o,setIsOpen:d,countryId:h,operatorId:w})]})}export{We as default};
